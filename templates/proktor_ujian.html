<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>ANBK Cihanjaro</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/assets/img/favicon.png" rel="icon">
  <link href="/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="/assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/assets/vendor/simple-datatables/style.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="/assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: NiceAdmin
  * Updated: Jan 29 2024 with Bootstrap v5.3.2
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">

    <div class="d-flex align-items-center justify-content-between">
      <a href="/" class="logo d-flex align-items-center">
        <img src="/assets/img/logo.png" alt="">
        <span class="d-none d-lg-block">ANBK Cihanjaro</span>
      </a>
      <i class="bi bi-list toggle-sidebar-btn"></i>
    </div><!-- End Logo -->

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">

        <li class="nav-item dropdown">

        <li class="nav-item dropdown pe-3">

          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <img src="/assets/img/profile-img.jpg" alt="Profile" class="rounded-circle">
            <span class="d-none d-md-block dropdown-toggle ps-2">{{ proktor.name }}</span>
          </a><!-- End Profile Iamge Icon -->

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
            <li class="dropdown-header">
              <h6>{{ proktor.name }}</h6>
              <span>Proktor</span>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="/keluar">
                <i class="bi bi-box-arrow-right"></i>
                <span>Keluar</span>
              </a>
            </li>

          </ul><!-- End Profile Dropdown Items -->
        </li><!-- End Profile Nav -->

      </ul>
    </nav><!-- End Icons Navigation -->

  </header><!-- End Header -->

  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">

      <li class="nav-item">
        <a class="nav-link collapsed" href="/">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li><!-- End Dashboard Nav -->

      <li class="nav-heading">Pages</li>

      <li class="nav-item">
        <a class="nav-link collapsed" href="/proktor/modul">
          <i class="bi bi-journals"></i>
          <span>Modul</span>
        </a>
      </li><!-- End Modul Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="/proktor/siswa">
          <i class="bi bi-people"></i>
          <span>Siswa</span>
        </a>
      </li><!-- End Siswa Page Nav -->

      <li class="nav-item">
        <a class="nav-link" href="/proktor/ujian">
          <i class="bi bi-pencil-square"></i>
          <span>Ujian</span>
        </a>
      </li><!-- End Exam Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="/proktor/percobaan">
          <i class="bi bi-list"></i>
          <span>Percobaan</span>
        </a>
      </li><!-- End Attempts Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="/proktor/aktivitas">
          <i class="bi bi-columns-gap"></i>
          <span>Aktivitas</span>
        </a>
      </li><!-- End Activity Page Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" href="/keluar">
          <i class="bi bi-box-arrow-right"></i>
          <span>Keluar</span>
        </a>
      </li><!-- End Logout Page Nav -->

    </ul>

  </aside><!-- End Sidebar-->

  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Ujian</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active">Ujian</li>
        </ol>
      </nav>

      <!-- Basic Modal -->
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#basicModal">
        <i class="bi bi-plus-lg"></i> Ujian Baru
      </button>
      <div class="modal fade" id="basicModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
          <form action="/proktor/ujian/tambah" method="post" class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Tambah Ujian</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="row g-3">
                <div class="col-12">
                  <div class="form-floating">
                    <input type="text" class="form-control" id="floatingName" name="exam_name" placeholder="Nama Modul"
                      required>
                    <label for="floatingName">Nama Ujian <span style="color: red">*</span></label>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-floating">
                    <select class="form-select" id="floatingSelect" onchange="selectModule()" required>
                      <option value="" disabled selected>Modul</option>
                      {% for m in modules %}
                      <option value="{{ m.id }}">{{ m.name }}</option>
                      {% endfor %}
                    </select>
                    <label for="floatingSelect">Pilih Modul <span style="color: red">*</span></label>
                  </div>
                </div>
                <div class="col-12 d-none" id="pack-select">
                  <div class="form-floating">
                    <select class="form-select" id="floatingSelect2" name="pack_id" required>
                      <option value="" disabled selected>Paket soal</option>
                    </select>
                    <label for="floatingSelect2">Pilih Paket Soal <span style="color: red">*</span></label>
                  </div>
                </div>
                <hr>
                <div class="col-12">
                  <div class="form-floating">
                    <input type="datetime-local" class="form-control" id="start-dt" name="start_dt" required>
                    <label for="start-dt">Waktu Mulai <span style="color: red">*</span></label>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-floating">
                    <input type="datetime-local" class="form-control" id="end-dt" name="end_dt">
                    <label for="end-dt">Waktu Selesai</label>
                  </div>
                </div>
                <hr>
                <div class="col-12 row">
                  <div class="col-6">
                    <div class="form-floating">
                      <input type="number" class="form-control" id="max-attempts" name="max_attempts" placeholder="Maks. Percobaan" value="0" required>
                      <label for="start-dt">Maks. Percobaan<span style="color: red">*</span> <small class="text-muted">(0 Jika tidak ada maksimum)</small></label>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-check form-switch border-bottom">
                      <input class="form-check-input" type="checkbox" name="show_score">
                      <label class="form-check-label">Tampilkan nilai ke siswa</label>
                    </div>
                  </div>
                  <p class="mt-1">Batas Waktu Pengerjaan <br><small class="text-muted">(Jika 0 berarti tidak ada batas
                      waktu)</small></p>
                  <div class="row">
                    <div class="col-3">
                      <input class="w-50" type="text" name="day" id="day" placeholder="0" value="0">
                      <label class="form-label" for="day">Hari</label>
                    </div>
                    <div class="col-3">
                      <select class="" name="hour" id="hour">
                        {% for i in range(24) %}
                        <option value="{{ '{:0>2}'.format(i) }}">{{ '{:0>2}'.format(i) }}</option>
                        {% endfor %}
                      </select>
                      <label class="form-label" for="hour">Jam</label>
                    </div>
                    <div class="col-3">
                      <select class="" name="minute" id="minute">
                        {% for i in range(64) %}
                        <option value="{{ '{:0>2}'.format(i) }}">{{ '{:0>2}'.format(i) }}</option>
                        {% endfor %}
                      </select>
                      <label class="form-label" for="minute">Menit</label>
                    </div>
                    <div class="col-3">
                      <select class="" name="second" id="second">
                        {% for i in range(64) %}
                        <option value="{{ '{:0>2}'.format(i) }}">{{ '{:0>2}'.format(i) }}</option>
                        {% endfor %}
                      </select>
                      <label class="form-label" for="second">Detik</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
              <button type="submit" class="btn btn-success">Submit</button>
            </div>
          </form>
        </div>
      </div><!-- End Basic Modal-->

    </div><!-- End Page Title -->

    <section class="section dashboard">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="ujian-tab" data-bs-toggle="tab" data-bs-target="#ujian" type="button"
            role="tab" aria-controls="ujian" aria-selected="true">Ujian</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="archived-tab" data-bs-toggle="tab" data-bs-target="#archived" type="button"
            role="tab" aria-controls="archived" aria-selected="false">Arsip</button>
        </li>
      </ul>

      <div class="tab-content pt-2" id="myTabContent">
        <div class="tab-pane fade show active" id="ujian" role="tabpanel" aria-labelledby="ujian-tab">
          <div class="row">
            {% for exam in exams | selectattr('archived', '==', false) | list %}
            <div class="col-md-6 ">
              <div class="card">
                <div class="filter">
                  <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                    <li>
                      <a class="dropdown-item" href="/proktor/ujian/{{ exam.exam_id }}/hapus"
                        onclick="return confirm('Anda akan menghapus data ujian: {{ exam.exam_name }}. Semua data percobaan ujian ini akan hilang.')"><i
                          class="bi bi-trash-fill"></i> Hapus Ujian</a>
                    </li>
                    <li>
                      <a href="/proktor/ujian/{{ exam.exam_id }}/arsip" class="dropdown-item"
                        onclick="return confirm('Anda akan mengarsip ujian: {{ exam.exam_name }}. Ujian yang diarsip tidak akan terlihat di laman siswa.')">
                        <i class="bi bi-archive-fill"></i> Arsip Ujian
                      </a>
                    </li>
                  </ul>
                </div>
                <a href="#" class="card-body" data-bs-toggle="modal" data-bs-target="#basicModal{{ exam.exam_id }}">
                  <h5 class="card-title">Ujian: {{ exam.exam_name }}</h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-journal-text"></i>
                    </div>
                    <div class="ps-3">
                      <p>Modul: {{ exam.module_name }}
                        <br>
                        Maks. Percobaan: {{ exam.max_attempts }}
                        <br>
                        Paket Soal: {{ exam.pack_name }} ({% for pack in packs %}
                        {% if pack.id == exam.pack_id %}
                        {{ pack.question_count }}
                        {% endif %}
                        {% endfor %}
                        Soal )
                        <br>
                        {% if exam.time_limit %}
                        {% set hours = exam.time_limit.seconds // 3600 %}
                        {% set remainder = exam.time_limit.seconds % 3600 %}
                        {% set minutes = remainder // 60 %}
                        {% set seconds = remainder % 60 %}
                        Batas waktu: {{ "{} hari, {} jam, {} menit, {} detik".format(exam.time_limit.days, hours,
                        minutes,
                        seconds) }}
                        {% else %}
                        Batas waktu: -
                        {% endif %}
                        <br>
                        Tampilkan nilai ke siswa: {{ 'Ya <i class="bi bi-check-lg"></i>' | safe if exam.show_score else 'Tidak <i class="bi bi-x-lg"></i>' | safe }}
                      
                      </p>
                      <div class="row">
                        <p class="col-6">Dimulai pada:
                          <br>
                          <strong><i class="bi bi-calendar-event"></i> Tanggal
                            <br>
                            {{ exam.start_dt.strftime('%m %B, %Y') }}
                          </strong>
                          <br>
                          <strong><i class="bi bi-clock"></i> Waktu
                            <br>
                            {{ exam.start_dt.strftime('%H:%M') }}</strong>
                        </p>
                        {% if exam.end_dt %}
                        <p class="col-6">Berakhir pada:
                          <br>
                          <strong><i class="bi bi-calendar-event"></i> Tanggal
                            <br>
                            {{ exam.end_dt.strftime('%m %B, %Y') }}
                          </strong>
                          <br>
                          <strong><i class="bi bi-clock"></i> Waktu
                            <br>
                            {{ exam.end_dt.strftime('%H:%M') }}
                          </strong>
                        </p>
                        {% else %}
                        <p class="col-6">Berakhir pada:
                          <br>
                          <strong><i class="bi bi-calendar-event"></i> Tanggal
                            <br>
                            -
                          </strong>
                          <br>
                          <strong><i class="bi bi-clock"></i> Waktu
                            <br>
                            -
                          </strong>
                        </p>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            </div>
            <div class="modal fade" id="basicModal{{ exam.exam_id }}" tabindex="-1">
              <div class="modal-dialog modal-lg">
                <form class="modal-content" action="/proktor/ujian/{{ exam.exam_id }}/edit" method="post">
                  <div class="modal-header">
                    <h5 class="modal-title">Edit Ujian</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div class="row g-3">
                      <div class="col-12">
                        <div class="form-floating">
                          <input type="text" class="form-control" id="floatingName" name="exam_name"
                            placeholder="Nama Modul" value="{{ exam.exam_name }}" required>
                          <label for="floatingName">Nama Ujian <span style="color: red">*</span></label>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-floating">
                          <select class="form-select" id="floatingSelect{{ exam.exam_id }}"
                            onchange="selectModuleEach({{ exam.exam_id }})" required>
                            <option value="" disabled>Modul</option>
                            {% for m in modules %}
                            <option value="{{ m.id }}" {{ 'selected' if m.id==exam.pack_id }}>{{ m.name }}</option>
                            {% endfor %}
                          </select>
                          <label for="floatingSelect">Pilih Modul <span style="color: red">*</span></label>
                        </div>
                      </div>
                      <div class="col-12" id="pack-select">
                        <div class="form-floating">
                          <select class="form-select" id="floatingSelect2{{ exam.exam_id }}" name="pack_id" required>
                            <option value="" disabled>Paket soal</option>
                            {% for p in packs %}
                            {% if p.module_id == exam.module_id %}
                            <option value="{{ p.id }}" {{ 'selected' if p.id==exam.pack_id }} {{ 'disabled' if
                              p.question_count==0 }}>{{ p.name }} | Jumlah soal: {{
                              p.question_count }}</option>
                            {% endif %}
                            {% endfor %}
                          </select>
                          <label for="floatingSelect2">Pilih Paket Soal <span style="color: red">*</span></label>
                        </div>
                      </div>
                      <hr>
                      <div class="col-12">
                        <div class="form-floating">
                          <input type="datetime-local" class="form-control" id="start-dt" name="start_dt"
                            value="{{ exam.start_dt }}" required>
                          <label for="start-dt">Waktu Mulai <span style="color: red">*</span></label>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-floating">
                          <input type="datetime-local" class="form-control" id="start-dt" name="end_dt"
                            value="{{ exam.end_dt }}">
                          <label for="start-dt">Waktu Selesai</label>
                        </div>
                      </div>
                      <hr>
                      <div class="col-12 row">
                        <div class="col-6">
                          <div class="form-floating">
                            <input type="number" class="form-control" id="max-attempts" name="max_attempts" placeholder="Maks. Percobaan" value="{{ exam.max_attempts }}" required>
                            <label for="start-dt">Maks. Percobaan<span style="color: red">*</span> <small class="text-muted">(0 Jika tidak ada maksimum)</small></label>
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-check form-switch border-bottom">
                            <input class="form-check-input" type="checkbox" name="show_score" {{ 'checked' if exam.show_score }}>
                            <label class="form-check-label">Tampilkan nilai ke siswa</label>
                          </div>
                        </div>
                        <p class="mt-1">Batas Waktu Pengerjaan <br><small class="text-muted">(Jika 0 berarti tidak ada batas
                            waktu)</small></p>
                        <div class="row">
                          {% if exam.time_limit %}
                          {% set hours = (exam.time_limit.seconds // 3600)|string %}
                          {% set remainder = exam.time_limit.seconds % 3600 %}
                          {% set minutes = (remainder // 60)|string %}
                          {% set seconds = (remainder % 60)|string %}
                          {% else %}
                          {% set hours = '0' %}
                          {% set minutes = '0' %}
                          {% set seconds = '0' %}
                          {% endif %}
                          <div class="col-3">
                            <input class="w-50" type="number" min="0" step="1" name="day" id="day"
                              value="{{ exam.time_limit.days or '00' }}">
                            <label class="form-label" for="day">Hari</label>
                          </div>
                          <div class="col-3">
                            <select class="" name="hour" id="hour">
                              {% for i in range(24) %}
                              <option value="{{ i }}" {{ 'selected' if i|string==hours }}>{{ '{:0>2}'.format(i) }}
                              </option>
                              {% endfor %}
                            </select>
                            <label class="form-label" for="hour">Jam</label>
                          </div>
                          <div class="col-3">
                            <select class="" name="minute" id="minute">
                              {% for i in range(64) %}
                              <option value="{{ i }}" {{ 'selected' if i|string==minutes }}>{{ '{:0>2}'.format(i) }}
                              </option>
                              {% endfor %}
                            </select>
                            <label class="form-label" for="minute">Menit</label>
                          </div>
                          <div class="col-3">
                            <select class="" name="second" id="second">
                              {% for i in range(64) %}
                              <option value="{{ i }}" {{ 'selected' if i|string==seconds }}>{{ '{:0>2}'.format(i) }}
                              </option>
                              {% endfor %}
                            </select>
                            <label class="form-label" for="second">Detik</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    <button type="submit" class="btn btn-warning">Edit</button>
                  </div>
                </form>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
        <div class="tab-pane fade" id="archived" role="tabpanel" aria-labelledby="archived-tab">
          <div class="row">
            {% for exam in exams | selectattr('archived', '==', true) | list %}
            <div class="col-md-6 ">
              <div class="card">
                <div class="filter">
                  <a class="icon" href="#" data-bs-toggle="dropdown"><i class="bi bi-three-dots"></i></a>
                  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                    <li>
                      <a class="dropdown-item" href="/proktor/ujian/{{ exam.exam_id }}/hapus"
                        onclick="return confirm('Anda akan menghapus data ujian: {{ exam.exam_name }}. Semua data percobaan ujian ini akan hilang.')"><i
                          class="bi bi-trash-fill"></i> Hapus Ujian</a>
                    </li>
                    <li>
                      <a href="/proktor/ujian/{{ exam.exam_id }}/arsip" class="dropdown-item">
                        <i class="bi bi-archive-fill"></i> Keluarkan dari arsip
                      </a>
                    </li>
                  </ul>
                </div>
                <a href="#" class="card-body" data-bs-toggle="modal" data-bs-target="#basicModal{{ exam.exam_id }}">
                  <h5 class="card-title">Ujian: {{ exam.exam_name }}</h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-journal-text"></i>
                    </div>
                    <div class="ps-3">
                      <p>Modul: {{ exam.module_name }}
                        <br>
                        Maks. Percobaan: {{ exam.max_attempts }}
                        <br>
                        Paket Soal: {{ exam.pack_name }} ({% for pack in packs %}
                        {% if pack.id == exam.pack_id %}
                        {{ pack.question_count }}
                        {% endif %}
                        {% endfor %}
                        Soal )
                        <br>
                        {% if exam.time_limit %}
                        {% set hours = exam.time_limit.seconds // 3600 %}
                        {% set remainder = exam.time_limit.seconds % 3600 %}
                        {% set minutes = remainder // 60 %}
                        {% set seconds = remainder % 60 %}
                        Batas waktu: {{ "{} hari, {} jam, {} menit, {} detik".format(exam.time_limit.days, hours,
                        minutes,
                        seconds) }}
                        {% else %}
                        Batas waktu: -
                        {% endif %}
                        <br>
                        Tampilkan nilai ke siswa: {{ 'Ya <i class="bi bi-check-lg"></i>' | safe if exam.show_score else 'Tidak <i class="bi bi-x-lg"></i>' | safe }}
                      </p>
                      <div class="row">
                        <p class="col-6">Dimulai pada:
                          <br>
                          <strong><i class="bi bi-calendar-event"></i> Tanggal
                            <br>
                            {{ exam.start_dt.strftime('%m %B, %Y') }}
                          </strong>
                          <br>
                          <strong><i class="bi bi-clock"></i> Waktu
                            <br>
                            {{ exam.start_dt.strftime('%H:%M') }}</strong>
                        </p>
                        {% if exam.end_dt %}
                        <p class="col-6">Berakhir pada:
                          <br>
                          <strong><i class="bi bi-calendar-event"></i> Tanggal
                            <br>
                            {{ exam.end_dt.strftime('%m %B, %Y') }}
                          </strong>
                          <br>
                          <strong><i class="bi bi-clock"></i> Waktu
                            <br>
                            {{ exam.end_dt.strftime('%H:%M') }}
                          </strong>
                        </p>
                        {% else %}
                        <p class="col-6">Berakhir pada:
                          <br>
                          <strong><i class="bi bi-calendar-event"></i> Tanggal
                            <br>
                            -
                          </strong>
                          <br>
                          <strong><i class="bi bi-clock"></i> Waktu
                            <br>
                            -
                          </strong>
                        </p>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            </div>
            <div class="modal fade" id="basicModal{{ exam.exam_id }}" tabindex="-1">
              <div class="modal-dialog modal-lg">
                <form class="modal-content" action="/proktor/ujian/{{ exam.exam_id }}/edit" method="post">
                  <div class="modal-header">
                    <h5 class="modal-title">Edit Ujian</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div class="row g-3">
                      <div class="col-12">
                        <div class="form-floating">
                          <input type="text" class="form-control" id="floatingName" name="exam_name"
                            placeholder="Nama Modul" value="{{ exam.exam_name }}" required>
                          <label for="floatingName">Nama Ujian <span style="color: red">*</span></label>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-floating">
                          <select class="form-select" id="floatingSelect{{ exam.exam_id }}"
                            onchange="selectModuleEach({{ exam.exam_id }})" required>
                            <option value="" disabled>Modul</option>
                            {% for m in modules %}
                            <option value="{{ m.id }}" {{ 'selected' if m.id==exam.pack_id }}>{{ m.name }}</option>
                            {% endfor %}
                          </select>
                          <label for="floatingSelect">Pilih Modul <span style="color: red">*</span></label>
                        </div>
                      </div>
                      <div class="col-12" id="pack-select">
                        <div class="form-floating">
                          <select class="form-select" id="floatingSelect2{{ exam.exam_id }}" name="pack_id" required>
                            <option value="" disabled>Paket soal</option>
                            {% for p in packs %}
                            {% if p.module_id == exam.module_id %}
                            <option value="{{ p.id }}" {{ 'selected' if p.id==exam.pack_id }} {{ 'disabled' if
                              p.question_count==0 }}>{{ p.name }} | Jumlah soal: {{
                              p.question_count }}</option>
                            {% endif %}
                            {% endfor %}
                          </select>
                          <label for="floatingSelect2">Pilih Paket Soal <span style="color: red">*</span></label>
                        </div>
                      </div>
                      <hr>
                      <div class="col-12">
                        <div class="form-floating">
                          <input type="datetime-local" class="form-control" id="start-dt" name="start_dt"
                            value="{{ exam.start_dt }}" required>
                          <label for="start-dt">Waktu Mulai <span style="color: red">*</span></label>
                        </div>
                      </div>
                      <div class="col-12">
                        <div class="form-floating">
                          <input type="datetime-local" class="form-control" id="start-dt" name="end_dt"
                            value="{{ exam.end_dt }}">
                          <label for="start-dt">Waktu Selesai</label>
                        </div>
                      </div>
                      <hr>
                      <div class="col-12 row">
                        <div class="col-6">
                          <div class="form-floating">
                            <input type="number" class="form-control" id="max-attempts" name="max_attempts" placeholder="Maks. Percobaan" value="{{ exam.max_attempts }}" required>
                            <label for="start-dt">Maks. Percobaan<span style="color: red">*</span> <small class="text-muted">(0 Jika tidak ada maksimum)</small></label>
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-check form-switch border-bottom">
                            <input class="form-check-input" type="checkbox" name="show_score" {{ 'checked' if exam.show_score }}>
                            <label class="form-check-label">Tampilkan nilai ke siswa</label>
                          </div>
                        </div>
                        <p class="mt-1">Batas Waktu Pengerjaan <br><small class="text-muted">(Jika 0 berarti tidak ada batas
                            waktu)</small></p>
                        <div class="row">
                          {% if exam.time_limit %}
                          {% set hours = (exam.time_limit.seconds // 3600)|string %}
                          {% set remainder = exam.time_limit.seconds % 3600 %}
                          {% set minutes = (remainder // 60)|string %}
                          {% set seconds = (remainder % 60)|string %}
                          {% else %}
                          {% set hours = '0' %}
                          {% set minutes = '0' %}
                          {% set seconds = '0' %}
                          {% endif %}
                          <div class="col-3">
                            <input class="w-50" type="number" min="0" step="1" name="day" id="day"
                              value="{{ exam.time_limit.days or '00' }}">
                            <label class="form-label" for="day">Hari</label>
                          </div>
                          <div class="col-3">
                            <select class="" name="hour" id="hour">
                              {% for i in range(24) %}
                              <option value="{{ i }}" {{ 'selected' if i|string==hours }}>{{ '{:0>2}'.format(i) }}
                              </option>
                              {% endfor %}
                            </select>
                            <label class="form-label" for="hour">Jam</label>
                          </div>
                          <div class="col-3">
                            <select class="" name="minute" id="minute">
                              {% for i in range(64) %}
                              <option value="{{ i }}" {{ 'selected' if i|string==minutes }}>{{ '{:0>2}'.format(i) }}
                              </option>
                              {% endfor %}
                            </select>
                            <label class="form-label" for="minute">Menit</label>
                          </div>
                          <div class="col-3">
                            <select class="" name="second" id="second">
                              {% for i in range(64) %}
                              <option value="{{ i }}" {{ 'selected' if i|string==seconds }}>{{ '{:0>2}'.format(i) }}
                              </option>
                              {% endfor %}
                            </select>
                            <label class="form-label" for="second">Detik</label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    <button type="submit" class="btn btn-warning">Edit</button>
                  </div>
                </form>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>NiceAdmin</span></strong>. All Rights Reserved
    </div>
    <div class="credits">
      <!-- All the links in the footer should remain intact. -->
      <!-- You can delete the links only if you purchased the pro version. -->
      <!-- Licensing information: https://bootstrapmade.com/license/ -->
      <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/ -->
      Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="/assets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/vendor/chart.js/chart.umd.js"></script>
  <script src="/assets/vendor/echarts/echarts.min.js"></script>
  <script src="/assets/vendor/quill/quill.min.js"></script>
  <script src="/assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="/assets/vendor/tinymce/tinymce.min.js"></script>
  <script src="/assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="/assets/js/main.js"></script>

  <script>
    var packs = {{ packs | tojson | safe }};

    function selectModule() {
      let moduleSelect = document.getElementById('floatingSelect');
      let packSelectRow = document.getElementById('pack-select');
      packSelectRow.classList.remove('d-none');

      let packSelect = document.getElementById('floatingSelect2');
      packSelect.children[0].selected = true;
      while (packSelect.children.length > 1) {
        packSelect.removeChild(packSelect.children[1]);
      }

      packs.forEach(pack => {
        if (pack.module_id == moduleSelect.value) {
          var optionElement = document.createElement('option');
          optionElement.value = pack.id;
          optionElement.textContent = `${pack.name} | Jumlah soal: ${pack.question_count}`;
          if (pack.question_count == 0) {
            optionElement.disabled = true;
          }

          packSelect.appendChild(optionElement);
        }
      })
    }

    function selectModuleEach(exam_id) {
      console.log("on change: " + exam_id)
      let moduleSelect = document.getElementById('floatingSelect' + exam_id);
      let packSelect = document.getElementById('floatingSelect2' + exam_id);
      packSelect.children[0].selected = true;

      while (packSelect.children.length > 1) {
        packSelect.removeChild(packSelect.children[1]);
      }

      packs.forEach(pack => {
        if (pack.module_id == moduleSelect.value) {
          var optionElement = document.createElement('option');
          optionElement.value = pack.id;
          optionElement.textContent = `${pack.name} | Jumlah soal: ${pack.question_count}`;
          if (pack.question_count == 0) {
            optionElement.disabled = true;
          }

          packSelect.appendChild(optionElement);
        }
      })
    }
  </script>
</body>

</html>